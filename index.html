<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T2B Sentiment Analysis | Sistema Multicanal</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <!-- Estilos -->
    <link rel="stylesheet" href="css/brand-colors.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/channels.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">
            üéØ T2B Sentiment Analysis
            <div class="logo-subtitle">Sistema Multicanal - Powered by Gemini AI</div>
        </div>
    </header>

    <!-- Main Grid: 3 Columnas -->
    <div class="main-grid">
        <!-- === COLUMNA 1: CONFIGURACI√ìN DE CANAL === -->
        <div class="input-column">
            <h2 class="column-title">üìä Configuraci√≥n de Canal</h2>
            
            <div class="form-group">
                <label for="channel-select">Seleccionar Canal</label>
                <select id="channel-select" required>
                    <option value="">Seleccionar canal...</option>
                    <option value="email">üìß Correo Electr√≥nico</option>
                    <option value="whatsapp">üí¨ WhatsApp Business</option>
                    <option value="x">ùïè X (Twitter)</option>
                    <option value="facebook">üë• Facebook</option>
                    <option value="instagram">üì∏ Instagram</option>
                    <option value="linkedin">üíº LinkedIn</option>
                </select>
            </div>

            <!-- Contenedor din√°mico seg√∫n el canal -->
            <div id="channel-config-container"></div>
        </div>

        <!-- === COLUMNA 2: RESULTADOS === -->
        <div class="results-column">
            <div id="empty-state" class="empty-state">
                <div class="empty-state-icon">üìä</div>
                <div class="empty-state-text">Selecciona un canal y configura el monitoreo para comenzar el an√°lisis en tiempo real</div>
            </div>

            <div id="results-container">
                <!-- KPIs de Polaridad -->
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-label">Positivo</div>
                        <div class="kpi-value" style="color: #10b981;" id="kpi-positive">0</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">Neutral</div>
                        <div class="kpi-value" style="color: #f59e0b;" id="kpi-neutral">0</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">Negativo</div>
                        <div class="kpi-value" style="color: #ef4444;" id="kpi-negative">0</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">Score</div>
                        <div class="kpi-value" style="color: #3b82f6;" id="kpi-score">0</div>
                    </div>
                </div>

                <!-- Emociones -->
                <div class="emotions-container">
                    <div class="emotions-card">
                        <h3>üòä Emociones Primarias</h3>
                        <div id="primary-emotions"></div>
                    </div>

                    <div class="emotions-card">
                        <h3>‚ú® Emociones Secundarias</h3>
                        <div id="secondary-emotions"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- === COLUMNA 3: GR√ÅFICA === -->
        <div class="chart-column">
            <h3 class="column-title">
                <span class="status-indicator"></span>
                üìà An√°lisis en Tiempo Real
            </h3>
            <div class="chart-container">
                <canvas id="networks-chart"></canvas>
            </div>
        </div>
    </div>

    <!-- === MODALES === -->
    
    <!-- Modal para Email -->
    <div id="email-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="email-modal-title">Agregar Correo Electr√≥nico</h3>
                <button class="modal-close" onclick="window.channelManager.closeEmailModal()">√ó</button>
            </div>
            
            <div class="form-group">
                <label for="email-name">Nombre del Personal</label>
                <input type="text" id="email-name" placeholder="Ej: Juan P√©rez" required>
            </div>

            <div class="form-group">
                <label for="email-address">Correo Electr√≥nico</label>
                <input type="email" id="email-address" placeholder="ejemplo@empresa.com" required>
            </div>

            <div class="form-group">
                <label for="email-department">Departamento/Unidad</label>
                <input type="text" id="email-department" placeholder="Ej: Ventas, Soporte" required>
            </div>

            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="window.channelManager.closeEmailModal()">Cancelar</button>
                <button class="btn btn-primary" onclick="window.channelManager.saveEmail()">Guardar</button>
            </div>
        </div>
    </div>

    <!-- Modal para WhatsApp -->
    <div id="whatsapp-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="whatsapp-modal-title">Agregar WhatsApp Business</h3>
                <button class="modal-close" onclick="window.channelManager.closeWhatsAppModal()">√ó</button>
            </div>
            
            <div class="form-group">
                <label for="whatsapp-name">Nombre del Personal</label>
                <input type="text" id="whatsapp-name" placeholder="Ej: Juan P√©rez" required>
            </div>

            <div class="form-group">
                <label for="whatsapp-phone">N√∫mero de Tel√©fono</label>
                <div class="phone-input-group">
                    <input type="text" id="whatsapp-code" placeholder="+504" maxlength="5" required>
                    <input type="tel" id="whatsapp-number" placeholder="98765432" required>
                </div>
            </div>

            <div class="form-group">
                <label for="whatsapp-department">Departamento/Unidad</label>
                <input type="text" id="whatsapp-department" placeholder="Ej: Ventas, Soporte" required>
            </div>

            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="window.channelManager.closeWhatsAppModal()">Cancelar</button>
                <button class="btn btn-primary" onclick="window.channelManager.saveWhatsApp()">Guardar</button>
            </div>
        </div>
    </div>

    <!-- Modal para Redes Sociales -->
    <div id="social-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="social-modal-title">Configurar Red Social</h3>
                <button class="modal-close" onclick="window.channelManager.closeSocialModal()">√ó</button>
            </div>
            
            <div class="form-group">
                <label for="social-search-terms">T√©rminos de B√∫squeda / Hashtags</label>
                <input type="text" id="social-search-terms" placeholder="#tech2business, @empresa" required>
            </div>

            <div class="form-group">
                <label for="social-keywords">Palabras Clave</label>
                <input type="text" id="social-keywords" placeholder="producto, servicio, soporte">
            </div>

            <div class="form-group">
                <label>Rango de Tiempo</label>
                <div class="date-range-group">
                    <input type="date" id="social-date-from" required>
                    <input type="date" id="social-date-to" required>
                </div>
            </div>

            <div class="form-group">
                <label for="social-limit">L√≠mite de Publicaciones</label>
                <input type="number" id="social-limit" placeholder="Dejar vac√≠o para ilimitado" min="1">
            </div>

            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="window.channelManager.closeSocialModal()">Cancelar</button>
                <button class="btn btn-primary" onclick="window.channelManager.saveSocialConfig()">Guardar</button>
            </div>
        </div>
    </div>

    <!-- Modal para Eliminar -->
    <div id="delete-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">‚ö†Ô∏è Confirmar Eliminaci√≥n</h3>
                <button class="modal-close" onclick="window.channelManager.closeDeleteModal()">√ó</button>
            </div>
            
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                ¬øEst√°s seguro de que deseas eliminar este elemento? Esta acci√≥n no se puede deshacer.
            </p>

            <div class="form-group">
                <label for="delete-reason">Motivo de la eliminaci√≥n</label>
                <textarea id="delete-reason" rows="3" placeholder="Describe el motivo..." required></textarea>
            </div>

            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="window.channelManager.closeDeleteModal()">Cancelar</button>
                <button class="btn btn-danger" onclick="window.channelManager.confirmDelete()">Eliminar</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/api-client.js"></script>
    <script src="js/channel-manager.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/realtime.js"></script>
    <script src="js/app.js"></script>
</body>
</html>